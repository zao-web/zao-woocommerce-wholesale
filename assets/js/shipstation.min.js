/*! Zao WooCommerce Wholesale - v0.1.0 - 2017-08-22 | https://zao.is | Copyright (c) 2017 Zao | Licensed  */

window.ZWOOWH=window.ZWOOWH||{},function(e,o,t,i,n){"use strict";i.shipStation={};var s=i.shipStation;s.cache=function(){s.order_id=t("#post_ID").val()},s.init=function(){s.cache(),i.$.body.on("click","#get_shipstation_rates",s.getRates)},s.setRates=function(o){var i=t("#shipstation-rates").find(":selected"),n=i.data("price"),a=i.val();s.block(),t.post(e.ajaxurl,{action:"set_shipstation_rates",order_id:s.order_id,price:n,value:a,method:i.text()},function(e){t("#shipstation-rates").fadeOut(),s.reload_items()},"json")},s.getRates=function(o){t(".shipstation-spinner").addClass("is-active"),t.post(e.ajaxurl,{action:"get_shipstation_rates",order_id:s.order_id},function(e){t("#shipstation-rates").remove();var o=t('<select id="shipstation-rates" />').insertBefore(t("#get_shipstation_rates"));o.append('<option value="">'+i.l10n.selectShipping+"</option>"),t.each(e.data,function(e,t){o.append('<option data-price="'+t.shipmentCost.toFixed(2)+'" value="'+t.serviceCode+'">'+t.serviceName+" - $"+t.shipmentCost.toFixed(2)+"</option>")});var n=o.select2();i.$.body.one("change",n,s.setRates),t(".shipstation-spinner").removeClass("is-active")},"json")},s.block=function(){t("#woocommerce-order-items").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},s.unblock=function(){t("#woocommerce-order-items").unblock()},s.reload_items=function(){s.block(),t.ajax({url:e.ajaxurl,data:{order_id:e.woocommerce_admin_meta_boxes.post_id,action:"woocommerce_load_order_items",security:e.woocommerce_admin_meta_boxes.order_item_nonce},type:"POST",success:function(e){t("#woocommerce-order-items").find(".inside").empty(),t("#woocommerce-order-items").find(".inside").append(e),s.unblock()}})},t(s.init)}(window,document,jQuery,window.ZWOOWH);